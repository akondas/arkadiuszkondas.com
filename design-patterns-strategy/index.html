<!DOCTYPE html>
<html lang="en">
    <head>
		<meta charset="utf-8">
<title>
	Design Patterns - Strategy | Arkadiusz Kondas | Software Architect and Data Scientist
</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="google-site-verification" content="MU-mYXXVQILTbPp2VGm6FVvg9Q-oXXfFaHVJrjv14vI" />

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-52176613-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-52176613-1');
</script>

<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="alternate" type="application/rss+xml" title="Arkadiusz Kondas Posts" href="/rss.xml">
<link rel="alternate" type="application/json" title="Arkadiusz Kondas Posts" href="/feed.json">

<link rel="stylesheet" href="/assets/css/styles.css">
		<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@ArkadiuszKondas">
<meta name="twitter:title" content="Design Patterns - Strategy">
<meta name="twitter:description" content="One of the main assumptions of good project programming is the &#039;Open/closed&#039; principle, which says that classes should be closed for modification, but open to extension. The strategy pattern allowsâ€¦" />
<meta name="twitter:image" content="https://arkadiuszkondas.com/assets/posts/design-patterns-strategy.png" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Design Patterns - Strategy" />
<meta property="og:description" content="One of the main assumptions of good project programming is the &#039;Open/closed&#039; principle, which says that classes should be closed for modification, but open to extension. The strategy pattern allows you to easily maintain this standard in your code." />
<meta property="og:url" content="https://arkadiuszkondas.com/design-patterns-strategy" />
<meta property="og:image" content="https://arkadiuszkondas.com/assets/posts/design-patterns-strategy.png" />
	</head>
    <body>
	    <div class="wrapper wrapper--side">
			<nav role="navigation">
    <ul class="nav">
        <li class="nav__item nav__item--logo">
            <a href="/">
                <div class="logo">
                    <div class="logo__background"><img
	src="https://www.gravatar.com/avatar/1e5883eecce756d56cccd9192fa6f4df?size=200"
	alt=""
	class="logo__image">
</div>
                </div>
                Arkadiusz Kondas
            </a> <strong class="title">software architect</strong>
        </li>
        <li class="nav__item"><a href="/about">about</a></li>
        <li class="nav__item"><a href="/">posts</a></li>
        <li class="nav__item"><a href="/books">books</a></li>
        <li class="nav__item"><a href="/workshops">workshops</a></li>
        <li class="nav__item"><a href="/talks">talks</a></li>
        <li class="nav__item"><a href="/projects">projects</a></li>
        <li class="nav__divider"></li>
        <li class="nav__item">
            <a href="https://twitter.com/ArkadiuszKondas" title="twitter" target="_blank"><i class="icon-twitter"></i><span class="sr-only">twitter</span></a>
            <a href="https://github.com/akondas" title="github" target="_blank"><i class="icon-github-circled"></i><span class="sr-only">github</span></a>
            <a href="https://www.linkedin.com/in/arkadiuszkondas" title="linkedin" target="_blank"><i class="icon-linkedin"></i><span class="sr-only">linkedin</span></a>
            <a href="https://arkadiuszkondas.com/rss.xml" title="RSS feed" target="_blank"><i class="icon-rss"></i><span class="sr-only">RSS feed</span></a>
        </li>
    </ul>
</nav>
			<div role="contentinfo" class="footer">
    <p>&copy; 2019 <a href="mailto:arkadiusz.kondas@gmail.com">Arkadiusz Kondas</a><span class="footer__extended">, follow me <a href="twitter://user?screen_name=ArkadiuszKondas">@ArkadiuszKondas</a></span></p>
</div>
		</div>

		<div class="wrapper wrapper--content">
			<main role="main" class="content">
				<h1>Design Patterns - Strategy</h1>
				

<ul class="post__meta">
	<li class="post__meta-item">19. February 2018</li>
	<li class="post__meta-item"><span class="disqus-comment-count" data-disqus-url="https://arkadiuszkondas.com/design-patterns-strategy"></span></li>	<li class="post__meta-item">5min to read</li>	<li class="post__meta-item"><a href="https://github.com/akondas/arkadiuszkondas.com/edit/master/site/_posts/2018/2018-02-19-design-patterns-strategy.md">suggest an edit</a></li></ul>
				<p class="post__description">One of the main assumptions of good project programming is the 'Open/closed' principle, which says that classes should be closed for modification, but open to extension. The strategy pattern allows you to easily maintain this standard in your code.</p>

				
				<h2>Problem</h2>
<p>For years, there has been a tendency in the development community to <strong>maximize cohesion and minimize coupling</strong>. The strategy very well solves the problem of reducing connections. This pattern allows to achieve this by defining interfaces and using them in base classes (let's call such classes <strong>clients</strong>). Next, the implementation details are hidden in the derived classes implementing the defined interface. Thanks to this, clients can freely relate to abstraction.</p>
<p>In other words, we solve this problem by <strong>programming to the interface instead of implementation</strong>. Because clients are attached to abstraction, not a specific implementation, they are freely open to expansion (by adding a new class implementing the defined interface).</p>
<h2>Pattern goals</h2>
<ul>
<li>Defining the family of algorithms, encapsulating each of them, and making them spare. The strategy allows you to change the algorithm regardless of the clients who use it.</li>
<li>Capture abstraction in the interface, bury implementation details in derived classes.</li>
</ul>
<h2>Structure</h2>
<p>In the strategy, we define a common interface, for supported algorithms, having allowed methods. In the next step, we implement individual strategies in individual classes. Next, we build the client's class, which will allow to determine the strategy (for example by injecting it) and will have a reference to the currently selected strategy. The client works with the chosen strategy in order to perform a specific task.</p>
<h2>Example of implementation</h2>
<p>An abstract problem: transport of guests to the airport. Transport can be done in several ways: by bus, car or taxi. An example of implementation in PHP:</p>
<pre><code class="language-php">class User {}
class TransportResult {}

interface TransportStrategy
{
    public function transport(User $user): TransportResult;
}

class CityBusTransport implements TransportStrategy
{
    public function transport(User $user): TransportResult
    {
        // TODO: Implement transport() method.
        return new TransportResult();
    }
}

class PersonalCarTransport implements TransportStrategy
{
    public function transport(User $user): TransportResult
    {
        // TODO: Implement transport() method.
        return new TransportResult();
    }
}

class TaxiTransport implements TransportStrategy
{
    public function transport(User $user): TransportResult
    {
        // TODO: Implement transport() method.
        return new TransportResult();
    }
}

class TransportationToAirport
{
    /**
     * @var TransportStrategy
     */
    private $strategy;

    public function __construct(TransportStrategy $strategy)
    {
        $this-&gt;strategy = $strategy;
    }

    public function run(User $user): TransportResult
    {
        return $this-&gt;strategy-&gt;transport($user);
    }

}

$user = new User();
$transportation = new TransportationToAirport(new CityBusTransport());
$transportation-&gt;run($user);</code></pre>
<p>Using the <code>TransportStrategy</code> interface, we can extend the domain with further implementations. However, the mere separation of individual behaviors to separate classes makes the whole thing easy to test:</p>
<pre><code class="language-php">use PHPUnit\Framework\TestCase;

class StrategyTest extends TestCase
{
    public function testCityBusTransportationStrategy()
    {
        $user = new User();
        $transportation = new TransportationToAirport(new CityBusTransport());

        $result = $transportation-&gt;run($user);

        $this-&gt;assertInstanceOf(TransportResult::class, $result);
    }
}</code></pre>
<h2>When to use</h2>
<ul>
<li>when there is a need to solve a given problem in a few different ways</li>
<li>when the system must be open for expansion</li>
<li>when you want to increase the readability of your code</li>
<li>when you want to express your intentions clearly and explicitly</li>
</ul>
<h2>Real live example</h2>
<p>At the end, I present a more real example of the use of a strategy pattern. The real problem: generating the value of the entity identifier in the database. The example is inspired by the <code>Doctrine</code> library. Suppose we have a class that saves entities in the database and needs a corresponding ID for each.</p>
<pre><code class="language-php">class EntityPersister
{
    /**
     * @var IdGenerator
     */
    private $idGenerator;

    public function __construct(IdGenerator $idGenerator)
    {
        $this-&gt;idGenerator = $idGenerator;
    }

    public function executeInserts()
    {
        /* ... */
        $generatedId = $this-&gt;idGenerator-&gt;generate($this-&gt;em, $entity);
        /* ... */
    }

}</code></pre>
<p>This ID can be generated in a few different ways, so creating an interface seems like a natural solution:</p>
<pre><code class="language-php">interface IdGenerator
{
    public function generate(EntityManager $em, $entity);
}</code></pre>
<p>Finally, the creation of specific implementations remains. For example, an ID creation strategy based on a global unique identifier (UUID).</p>
<pre><code class="language-php">class UuidGenerator implements IdGenerator
{
    public function generate(EntityManager $em, $entity)
    {
        // generate UUID
    }
}</code></pre>
<p>The next method can be generation based on a specific sequence controlled by the domain conditions:</p>
<pre><code class="language-php">class SequenceGenerator implements IdGenerator
{
    public function generate(EntityManager $em, $entity)
    {
        // generate next sequence value
    }
}</code></pre>
<p>Yet another time (as it turns out most often) we generate ID in the database itself (through the auto-increment mechanism):</p>
<pre><code class="language-php">class IdentityGenerator implements IdGenerator
{
    public function generate(EntityManager $em, $entity)
    {
        // get value from auto-increment column
    }
}</code></pre>
<p>Of course, in this way, we can extend our system and add a new implementation at any time. We can also use different implementations in different parts of the system.</p>
<p>You can find the source code for the examples at: <a target="_blank" href="https://github.com/akondas/php-design-patterns">https://github.com/akondas/php-design-patterns</a></p>

				<div class="post__signature">Arkadiusz Kondas</div>

				<!-- Begin Mailchimp Signup Form -->
<div id="mc_embed_signup">
    <strong>Don't miss new blog posts and subscribe.</strong>
    <form action="https://itcraftsman.us7.list-manage.com/subscribe/post?u=b8fa64b8b33c5d5d41ef8c0f0&amp;id=234aa6c680" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
            <input type="text" value="" name="FNAME" class="name" id="mce-FNAME" placeholder="First Name..." />
            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email address..." required>
            <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
            <div style="position: absolute; left: -5000px; clear: both;" aria-hidden="true"><input type="text" name="b_b8fa64b8b33c5d5d41ef8c0f0_234aa6c680" tabindex="-1" value=""></div>
            <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
        </div>
    </form>
</div>
<!--End mc_embed_signup-->

				<div id="social" class="post__social"></div>

									<section class="post__sources">
						<h3>Sources</h3>
						<ul class="post__sources-list">
															<li><a href="https://en.wikipedia.org/wiki/Open/closed_principle" rel="nofollow" target="_blank">Open / closed principle</a></li>
															<li><a href="https://sourcemaking.com/design_patterns/strategy" rel="nofollow" target="_blank">Strategy Design Pattern</a></li>
													</ul>
					</section>
							</main>
		</div>

		    <script src="/assets/js/scripts.js" async></script>

<script>
    const disqusCode = 'arkadiusz-kondas-website';
</script>
<script id="dsq-count-scr" src="https://arkadiusz-kondas-website.disqus.com/count.js" async defer></script>
	</body>
</html>
